<!DOCTYPE html>
<!-- saved from url=(0040)http://localhost/inventory/inventory/47/ -->
<html lang="en-us" suppresshydrationwarning="true" data-lt-installed="true"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <!-- Required meta tags -->
    
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="apple-touch-icon" sizes="180x180" href="http://localhost/static/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="http://localhost/static/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="http://localhost/static/favicon/favicon-16x16.png">
    <link rel="manifest" href="http://localhost/static/favicon/site.webmanifest">


    <!-- Page title -->
    <title>P BRIEN</title>

    <!-- Bootstrap CSS -->
    <link crossorigin="anonymous" href="./https-::infoscan.firebru.brussels?data=1,1,497,1010_files/bootstrap.min.css" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" rel="stylesheet">
    <link href="./https-::infoscan.firebru.brussels?data=1,1,497,1010_files/bootstrap-icons.css" rel="stylesheet">
    

    <!-- Bootstrap JavaScript  -->
    <script crossorigin="anonymous" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" src="./https-::infoscan.firebru.brussels?data=1,1,497,1010_files/bootstrap.bundle.min.js"></script>

    

<style>
  #scanner-input {
    position: absolute;
    left: -9999px;
  }
</style>



</head>

<body>

  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container">
      <a class="navbar-brand" href="http://localhost/inventory/inventory/47/#">
        Radio Asset Management
      </a>

      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
        <ul class="navbar-nav">
          <li class="nav-item"><a class="nav-link" href="http://localhost/inventory/post/"><i class="bi bi-qr-code-scan"></i> Scanner</a></li>
        </ul>
      </div>
    </div>
  </nav>


  <div class="container mt-4">
    


    
    


<div class="container">

  <div class="row g-4">

    
    <div class="col">

      <div class="border rounded p-2 h-100 d-flex flex-column position-relative" data-radio-link-id="8" data-forseen-tei="00035306001734" data-scanned="false"> 

        <h5 class="text-center mb-3">P BRIEN 1-1</h5>

        <div class="overflow-auto text-center">
          


<div class="card d-inline-block m-2 shadow" style="min-width: 18rem; filter: grayscale(100%);" data-tei="00035306001734">

  <div class="card-header bg-danger text-white d-flex justify-content-between align-items-center">

    <strong>
      
        
          P BRIEN 1-1
        
      
    </strong>

    <div>
      

      
        <span class="badge bg-success">2211922</span>
      
    </div>

  </div>

  <div class="card-body text-center">

    
    

    <div>P BRIEN</div>

    <div class="text-muted small">
      
        Laatst gezien: <time class="timeago" datetime="2025-07-15T14:00:29.004551+00:00" timeago-id="4">8 hours ago</time>
      
    </div>

    <hr>

    <div class="text-muted small">
      TEI: 00035306001734
    </div>

  </div>


</div>
        </div>

      </div>

    </div>
    
    <div class="col">

      <div class="border rounded p-2 h-100 d-flex flex-column position-relative" data-radio-link-id="9" data-forseen-tei="00035306002183" data-scanned="false"> 

        <h5 class="text-center mb-3">P BRIEN 1-2</h5>

        <div class="overflow-auto text-center">
          


<div class="card d-inline-block m-2 shadow" style="min-width: 18rem; filter: grayscale(100%);" data-tei="00035306002183">

  <div class="card-header bg-danger text-white d-flex justify-content-between align-items-center">

    <strong>
      
        
          P BRIEN 1-2
        
      
    </strong>

    <div>
      

      
        <span class="badge bg-success">2211561</span>
      
    </div>

  </div>

  <div class="card-body text-center">

    
    

    <div></div>

    <div class="text-muted small">
      
        Nog niet gescand
      
    </div>

    <hr>

    <div class="text-muted small">
      TEI: 00035306002183
    </div>

  </div>


</div>
        </div>

      </div>

    </div>
    
    <div class="col">

      <div class="border rounded p-2 h-100 d-flex flex-column position-relative" data-radio-link-id="10" data-forseen-tei="00035306001521" data-scanned="false"> 

        <h5 class="text-center mb-3">P BRIEN 1-3</h5>

        <div class="overflow-auto text-center">
          


<div class="card d-inline-block m-2 shadow" style="min-width: 18rem; filter: grayscale(100%);" data-tei="00035306001521">

  <div class="card-header bg-danger text-white d-flex justify-content-between align-items-center">

    <strong>
      
        
          P BRIEN 1-3
        
      
    </strong>

    <div>
      

      
        <span class="badge bg-success">2211480</span>
      
    </div>

  </div>

  <div class="card-body text-center">

    
    

    <div></div>

    <div class="text-muted small">
      
        Nog niet gescand
      
    </div>

    <hr>

    <div class="text-muted small">
      TEI: 00035306001521
    </div>

  </div>


</div>
        </div>

      </div>

    </div>
    
    <div class="col">

      <div class="border rounded p-2 h-100 d-flex flex-column position-relative" data-radio-link-id="11" data-forseen-tei="00035306002216" data-scanned="false"> 

        <h5 class="text-center mb-3">P BRIEN 1-4</h5>

        <div class="overflow-auto text-center">
          


<div class="card d-inline-block m-2 shadow" style="min-width: 18rem; filter: grayscale(100%);" data-tei="00035306002216">

  <div class="card-header bg-danger text-white d-flex justify-content-between align-items-center">

    <strong>
      
        
          P BRIEN 1-4
        
      
    </strong>

    <div>
      

      
        <span class="badge bg-success">2211588</span>
      
    </div>

  </div>

  <div class="card-body text-center">

    
    

    <div></div>

    <div class="text-muted small">
      
        Nog niet gescand
      
    </div>

    <hr>

    <div class="text-muted small">
      TEI: 00035306002216
    </div>

  </div>


</div>
        </div>

      </div>

    </div>
    
    <div class="col">

      <div class="border rounded p-2 h-100 d-flex flex-column position-relative" data-radio-link-id="12" data-forseen-tei="00035306001725" data-scanned="false"> 

        <h5 class="text-center mb-3">P BRIEN 1-6</h5>

        <div class="overflow-auto text-center">
          


<div class="card d-inline-block m-2 shadow" style="min-width: 18rem; filter: grayscale(100%);" data-tei="00035306001725">

  <div class="card-header bg-danger text-white d-flex justify-content-between align-items-center">

    <strong>
      
        
          P BRIEN 1-6
        
      
    </strong>

    <div>
      

      
        <span class="badge bg-success">2211916</span>
      
    </div>

  </div>

  <div class="card-body text-center">

    
    

    <div></div>

    <div class="text-muted small">
      
        Nog niet gescand
      
    </div>

    <hr>

    <div class="text-muted small">
      TEI: 00035306001725
    </div>

  </div>


</div>
        </div>

      </div>

    </div>
    
    <div class="col">

      <div class="border rounded p-2 h-100 d-flex flex-column position-relative" data-radio-link-id="13" data-forseen-tei="00009806105038" data-scanned="false"> 

        <h5 class="text-center mb-3">P BRIEN 1-EX</h5>

        <div class="overflow-auto text-center">
          


<div class="card d-inline-block m-2 shadow" style="min-width: 18rem; filter: grayscale(100%);" data-tei="00009806105038">

  <div class="card-header bg-danger text-white d-flex justify-content-between align-items-center">

    <strong>
      
        
          P BRIEN 1-EX
        
      
    </strong>

    <div>
      
        <img src="./https-::infoscan.firebru.brussels?data=1,1,497,1010_files/atex.svg" alt="atex" style="height: 1em;" class="me-2">
      

      
        <span class="badge bg-success">2211942</span>
      
    </div>

  </div>

  <div class="card-body text-center">

    
    

    <div></div>

    <div class="text-muted small">
      
        Nog niet gescand
      
    </div>

    <hr>

    <div class="text-muted small">
      TEI: 00009806105038
    </div>

  </div>


</div>
        </div>

      </div>

    </div>
    

  </div>

  <input type="text" id="scanner-input" autofocus="">

</div>


<div class="modal fade" id="teiModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Ongekende TEI</h5>
      </div>
      <div class="modal-body">
        <p>De TEI <strong id="unknown-tei"></strong> werd niet herkend. Kies een locatie om toe te wijzen:</p>
        <div id="tei-assign-buttons" class="d-grid gap-2"></div>
      </div>
    </div>
  </div>
</div>

  

    
  </div>
  
  

<script src="./https-::infoscan.firebru.brussels?data=1,1,497,1010_files/timeago.min.js"></script>
<script src="./https-::infoscan.firebru.brussels?data=1,1,497,1010_files/timeago.locales.min.js"></script>
<script src="./https-::infoscan.firebru.brussels?data=1,1,497,1010_files/radio_card.js"></script>

<script>
  
  document.addEventListener('DOMContentLoaded', function () {


    const input = document.getElementById('scanner-input');

    function focusInput() {
      input.focus();
    }

    document.addEventListener('click', focusInput);
    document.addEventListener('keydown', focusInput);
    window.addEventListener('blur', () => setTimeout(focusInput, 100)); // bij alt-tab

    focusInput();

    input.addEventListener('keypress', function (e) {
      if (e.key === 'Enter') {
        e.preventDefault();
        const scanned_line = input.value.trim();
        input.value = '';

        if (scanned_line === '') return;

        console.log(scanned_line);
        
        fetch("/inventory/scan/", {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({ scanned_line }),
        })
        .then(res => res.json())
        .then(data => {
          handleScanResponse(data);
        });

      }
    });
  });

  



function handleScanResponse(data) {
  console.log(data);
  const tei = data.TEI.toString().padStart(14, '0');

  const container = document.querySelector(`.border[data-forseen-tei="${tei}"]`);
  console.log(container);

  const radioCard = document.querySelector(`.card[data-tei="${tei}"]`);
  console.log

  if (radioCard) {
    // TEI bestaat → verwijder grayscale + markeer als gescand
    radioCard.style.filter = '';
    const wrapper = radioCard.closest('[data-radio-link-id]');
    if (wrapper) wrapper.dataset.scanned = 'true';
  } else {
    // TEI onbekend → toon modal
    showTeiModal(tei);
  }
}


function showTeiModal(tei) {
  // Toon TEI in modal
  document.getElementById('unknown-tei').textContent = tei;

  const container = document.getElementById('tei-assign-buttons');
  container.innerHTML = '';

  // Toon knoppen voor alle niet-gescande kaarten
  document.querySelectorAll('[data-radio-link-id][data-scanned="false"]').forEach(el => {
    const linkId = el.dataset.radioLinkId;
    const naam = el.querySelector('h5')?.textContent || `Link ${linkId}`;

    const btn = document.createElement('button');
    btn.className = 'btn btn-outline-primary';
    btn.textContent = naam;
    btn.onclick = () => assignTeiToSlot(el, tei);

    container.appendChild(btn);
  });

  const modal = new bootstrap.Modal(document.getElementById('teiModal'));
  modal.show();
}


function assignTeiToSlot(el, tei) {
  // Vervang kaart door placeholder die radio_card.js zal invullen
  const placeholder = document.createElement('div');
  placeholder.className = 'radio-card';
  placeholder.dataset.tei = tei;
  el.querySelector('.card')?.replaceWith(placeholder);
  el.dataset.scanned = 'true';

  // (Her)laad de juiste kaart
  renderRadioCards([placeholder]);

  // Sluit de modal
  const modal = bootstrap.Modal.getInstance(document.getElementById('teiModal'));
  modal.hide();
}



</script>




</body></html>